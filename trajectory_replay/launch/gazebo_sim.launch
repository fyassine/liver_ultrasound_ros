<?xml version="1.0"?>
<launch>
  <arg name="model" default="iiwa7"/>
  <arg name="robot_name" default="iiwa"/>
  <arg name="hardware_interface" default="PositionJointInterface"/>
  <arg name="paused" default="false"/>

  <include file="$(find gazebo_ros)/launch/empty_world.launch">
    <arg name="paused" value="$(arg paused)"/>
    <arg name="use_sim_time" value="true"/>
    <arg name="gui" value="true"/>
    <arg name="headless" value="false"/>
  </include>

  <include file="$(find ultrasound_probe_description)/launch/iiwa7_ultrasound_probe_upload.launch">
    <arg name="hardware_interface" value="$(arg hardware_interface)"/>
    <arg name="robot_name" value="$(arg robot_name)"/>
  </include>

  <group ns="$(arg robot_name)">
    <include file="$(find ultrasound_probe_description)/launch/iiwa7_ultrasound_probe_upload.launch">
      <arg name="hardware_interface" value="$(arg hardware_interface)"/>
      <arg name="robot_name" value="$(arg robot_name)"/>
    </include>
  </group>

  <node name="urdf_spawner" pkg="gazebo_ros" type="spawn_model" output="screen"
        args="-urdf -model $(arg robot_name) -param robot_description -x 0.0 -y 0.0 -z 0.5 
              -J $(arg robot_name)_joint_1 0.0
              -J $(arg robot_name)_joint_2 0.0
              -J $(arg robot_name)_joint_3 0.0
              -J $(arg robot_name)_joint_4 0.0
              -J $(arg robot_name)_joint_5 0.0
              -J $(arg robot_name)_joint_6 0.0
              -J $(arg robot_name)_joint_7 0.0"/>

  <group ns="$(arg robot_name)">
    <include file="$(find iiwa_control)/launch/iiwa_control.launch">
      <arg name="hardware_interface" value="$(arg hardware_interface)"/>
      <arg name="controllers" value="joint_state_controller $(arg hardware_interface)_trajectory_controller"/>
      <arg name="robot_name" value="$(arg robot_name)"/>
      <arg name="model" value="$(arg model)"/>
    </include>
  </group>

</launch>
